<!DOCTYPE html>

<head>
        <!--cordova (phonegap api)-->   
        <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
        <!--google maps api--> 
        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>                 
                
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
        <meta charset="utf-8">

        <!--roboto font-->
        <link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'> 
                    
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" type="text/javascript"></script>	

        <!--date picker-->
        
	    <script src="js/mobiscroll.core.js"></script>
	    <script src="js/mobiscroll.scroller.js" type="text/javascript"></script>	
	    <script src="js/mobiscroll.datetime.js" type="text/javascript"></script>
	    <script src="js/mobiscroll.select.js" type="text/javascript"></script>	
	 	<script src="js/i18n/mobiscroll.i18n.es.js" type="text/javascript"></script>
		<script src="js/mobiscroll.scroller.android-ics.js" type="text/javascript"></script>
		<link href="css/mobiscroll.scroller.css" rel="stylesheet" type="text/css" />
	    <link href="css/mobiscroll.scroller.android-ics.css" rel="stylesheet" type="text/css" />
	    <link href="css/mobiscroll.animation.css" rel="stylesheet" type="text/css" /> 				

	    
        <!--progress spinner-->
        <script type="text/javascript" charset="UTF-8" src="spinner.js"></script>
        <script type="text/javascript" charset="UTF-8" src="spinner.min.js"></script>
  		<!-- general style-->
     	<script src="jquery.mobile-events.js"></script>
     	<link rel="stylesheet" type="text/css" href="style.css">
        <script type="text/javascript" charset="UTF-8" src="script.js" ></script>  
   			             
        <title>Main Page</title>
</head>

<html >
        <body onload=" FirstLoad();" style="height: 100%; background-color:#f3f3f3" >
        	<button id='closeMapButton' class="center" onclick='ToggleMap()'  style="display:none; position: absolute; z-index: 100; top:0;" >Close map</button>
            <div id="mapDisplay" style="display: none;">
                                    
            </div>
            
			<div id="topMenu" style="width: 100%; position: fixed; border-bottom: solid #f3f3f3 8px; background-color: #0099CC; z-index: 100">
				<ul style="width: 100%; " class="navBar">
					<li onclick="ChangePage('SOSPage','SOSTab'); return false;" class="navTab" >
						 <a id="SOSTab" class="tab" href="#"> SOS </a> 
					</li>
					<li style="width: 34%;"  class="middleTab navTab" onclick="ChangePage('reportPage','reportPageTab'); return false;" >
						  <a id="reportPageTab"  class="tab " href="#" > Report </a>  
					</li>
					<li onclick="ChangePage('messagesPage','messagesTab'); return false;" class="navTab">
						  <a id="messagesTab"   class="tab" href="#"> Messages </a> 
					</li>
				</ul>
			</div>
<!---------------------------------  sos section ---------------------------------->
			<div id="SOSPage"  class="pageWrap" >
				<div id="SOSWrap" class="sectionWrap">
					<h1 class="headerDecoration" style="font-size: 200%; border-bottom: none; margin-bottom: 0px" >Send SOS</h1>
					<form id="SOSForm" target='uploadIframe' method="post" > 
							<iframe id='uploadIframe' style="display: none"> </iframe>
							<div id="buttonSection" class="center" style="height: 60%; width:100%; margin-top: 10px">
								<img id="SOSButton" src='./images/btn_sos_normal.png' />
							</div>
									
							<div id="pressLongMessage" class="center" align="center" style="opacity: 0;">
								<span style="display: inline-block;padding: 3px;background: black; color: white; border-radius: 4px; margin-top:3px; ">Hold button to send SOS</span>
							</div>
							<div id="contactsSection" >
								<p class="headerDecoration" style="margin-bottom: 7px; margin-top: 0px;">Contacts Circle</p>
								
		
								<table id="contactsList" style='font-size: 120%; width:100% ;'>
	
								</table>
	
								<table border="0" id='addingContactField' style='display:none; font-size: 100%; width:100%' >
									<tr>
										<td style="width:5%" class="center"><img src="./images/x.png" class="icons" onclick="CancelAdding(); return false" style="float: none; padding-top:7px;"></td>
										<td style="width:45%">
												<input type="text" id="contactName" class="inputBox" placeholder="Name" />	
										</td>
										<td style="width:45%">
												<input type="tel" id="contactNumber"  class="inputBox" placeholder="Number" />	
										</td>
										<td style="width:5%" class="center"><img src="./images/plus.png"  class="icons" onclick="AddContact(); return false "   style="float: none; padding-top:7px;">	</td>
									</tr>
								</table>	
								<div id="addbutton" style="display: inline; " >
									<input class="submitButtonStyle" type="submit" value="Add contact" style="width: 100%" onclick="ToggleDisplay('addingContactField','table'); ToggleDisplay('addbutton','inline'); return false"  />
								</div>	
								<input  style="width:100%" type="submit" id="OKButton" class="submitButtonStyle" onclick="CheckActivation();" value="OK" /> 	
							</div>
	
					</form>
				</div>
			</div>
<!---------------------------------  end of sos section ---------------------------------->

<!---------------------------------  report section ---------------------------------->
            <div id="reportPage" class="pageWrap" style="display: none;">
            	
                   	<form id="reportForm" target='uploadIframe' method="post">
 		
                    	<div  class="sectionWrap" style="margin-bottom: 10px; ">

                            <div id="reportData">                        		  
                        		  <!--main page header-->
                       			  <h1 class="headerDecoration" style="font-size: 200%; border-bottom: none"> Report Crime </h1>                                                              
                                   
                                   
                                   <!--crime type section-->      
                                  <div id="crimeType" class="section">                                                                                                                                                       
                                          <div id="crimeTypeHeader">
                                                  <p  class="headerDecoration">Type</p>
                                          </div>
                                          <div id="crimeTypeSelection" >
                                                <select  name="subjectId" id="subjectId" style=" margin-bottom:0; font-size: 100%; position:inherit; padding: 4px;" class="dropdown" >
                                                    <option value="1">Venta Ilegal de Pirotecnicos</option>
                                                    <option value="2">Riesgo en Defensa Civil en Locales Comerciales</option>
                                                    <option value="3">Venta de Juguetes Toxicos</option>
                                                    <option value="4">Narcotráfico</option>
                                                    <option value="5">Terrorismo</option>
                                                    <option value="6">Secuestro</option>
                                                    <option value="7">Homicidio</option>
                                                    <option value="8">Pandillaje</option>
                                                    <option value="9">Violencia familiar</option>
                                                    <option value="10">Estafa</option>
                                                    <option value="11">Robo de Vehículos</option>
                                                    <option value="12">Corrupción</option>
                                                    <option value="13">Violación</option>
                                                    <option value="14">Robo de Casas</option>
                                                    <option value="15">Marcas – Robo a mano armada</option>
                                                    <option value="16">Ordenamiento vial</option>
                                                    <option value="17">Envía Placa</option>
                                                    <option value="18">Otros</option>
                                                </select>
                                          </div>
                                  
                                  </div>

                        		 <!--crime description section-->                                   
                                  <div id="crimeDescription" class="section">
                                          <div id="crimeDescriptionHeader">
                                                  <p  class="headerDecoration" >Description</p>
                                          </div>
                                          <div id="crimeDescriptionBox" class="robo">
                                                  <textarea  id="descriptionBox" name="comment"  style=" display: block" class="autoResizeTextBox" onfocus="HighLightUL('crimeDescriptionUL')" onblur="DeHighLightUL('crimeDescriptionUL')"></textarea> 
                                          </div>
                                          <div id="crimeDescriptionUL" class="textEditUnderLine">
                                          </div>
                                  </div>
    
    								<!--crime location section-->
                                  <div id="crimeLocation" class="section">                                                                                        
                                          <div id="crimeLocationHeader">
                                                  <p  class="headerDecoration">Location</p>
                                          </div>
                                          
                                          <div id="crimeLocationData"  onclick="ViewLocationOnMap();" >
												<img src="./images/map-pin.png" class="icons" >
												<div id="addressBar" class="robo">
													<br/>						 
												</div>  
												        
                                          </div>
                                  </div>
    
    								 <!--crime date section-->
                                  <div id="crimeDate" class="section" >                                                                                                                                                       
                                          <div id="crimeDateHeader" >
                                                  <p  class="headerDecoration">Date &amp; Hour</p>
                                          </div>
                                          <div id="crimeDateData">
												<div id="datetimepicker" >
													<img src="./images/calendar.png" class="icons">
													<input id="scroller" name="ex221" class="roboto" style=" border:none; font-size: 100%"  />
										            									       
												</div>
												  
                                          </div>
                                  </div>
                                  
                                  <!--crime photos section-->    
                                  <div id="crimePhotos" class="section">                                                                                       
                                        <div id="crimePhotosHeader">
                      						<p  class="headerDecoration">Photos</p>
                                        </div>
                               			<div id="crimePhotoAddButtons" onclick="TogglePhotoButtons(); return false" style="display: inline;">
                     						<img src="./images/camera.png" class="icons"  >         
                             			</div>
                                        <div id="addPhotoButtons" style="display:none; position: absolute; margin-left: 5px;" >
                                                <button id="captureButton" class="littleButtonStyle" onclick="capturePhoto(); ToggleDisplay('addPhotoButtons','inline'); return false"  >Capture Photo</button> 
                                                <button id="fromLibButton" class="littleButtonStyle" onclick="getPhoto(pictureSource.PHOTOLIBRARY); ToggleDisplay('addPhotoButtons','inline'); return false" >Photo Library</button>
                                        </div>
                                        <div id="photosSection" >
                                                <br/> <br/> 
                                        </div>
								</div>

                            </div>

						</div>
						
                        <div id="submitReportButton" style="display: block; max-width:100%; margin:10px" >
                            <input   style="width:100%" type="submit" id="submitCrimeButton" class="submitButtonStyle" onclick="SubmitCrime(); return false;" value="Submit Crime" /> 
                    	</div>					    
                    </form>
					<form id="picForm" target='uploadIframe' method="post" >
					</form>                    		
            </div>
<!----------------------------------------- end of report section -------------------------------------->    
       
<!----------------------------------------- messages section -------------------------------------->                  
			<div id="messagesPage"  class="pageWrap" style="display: none;">
				
					<form id="messagesForm" target='uploadIframe' method="post" >
					</form>
					<form id="commentForm"	target='uploadIframe' method="post" >
						<div id="messagesSection" style="padding: 15px;">
								
								
						</div>
					</form>
			</div>

<!----------------------------------------- end of messages section -------------------------------------->         
      	<form id="regPageForm" target='uploadIframe' method="post">
				<div id="registrationPage"  class="pageWrap" style="padding-top: 0;">
					<div id="registrationWrap" class="sectionWrap" >					
						<h1 class="headerDecoration" style="font-size: 200%; border-bottom: none; margin-bottom: 0px" >Registration</h1>
						
						<div id="phoneNumberSection">
							<p  class="headerDecoration">Phone Number</p>
							<img id="numberAttention" src="./images/attention.png" class="attentionIcon" onclick="ShowBubble('numberBubble',phoneNumberError); return false">
							<input type="tel" id="phoneNumber"  maxlength="15" class="regInputBox" placeholder=""  onfocus="HighLightUL('phoneNumberUL'); HideElement('numberAttention');" onblur="DeHighLightUL('phoneNumberUL'); ValidatePhone()"  />
							
							<div id="phoneNumberUL" class="textEditUnderLine">
								
							</div>
							<div id="numberBubble" class="bubble" style="float:right; display: none" >
								
							</div>
						</div>
						
						<div id="emailSection">
							<p  class="headerDecoration">Email</p>
							<img id="emailAttention" src="./images/attention.png" class="attentionIcon" onclick="ShowBubble('emailBubble',emailError); return false" >
							<input type="email" id="email"  class="regInputBox" placeholder="" onfocus="HighLightUL('emailUL');  HideElement('emailAttention');" onblur="DeHighLightUL('emailUL'); EmailValidation()"  />
							
							<div id="emailUL" class="textEditUnderLine">
								
							</div>
							<div id="emailBubble" class="bubble" style="float:right; display: none">
								
							</div>
						</div>
						
						<div id="dateSection">
							<p  class="headerDecoration">Birth Date</p>
							<img id="dateAttention" src="./images/attention.png" class="attentionIcon" onclick="ShowBubble('dateBubble',birthDateError); return false"  >
							<input id="picker" name="picker" class="roboto regInputBox" placeholder="" style="width:100%; border:none; font-size: 120%; color:black" onchange="CheckDate()"  />
	
							<div id="dateUL" class="textEditUnderLine">
								
							</div>
							<div id="dateBubble" class="bubble" style="float:right; display: none">
								
							</div>
						</div>
						
						<div id="sexSection">
							<p  class="headerDecoration">Sex</p>
							<input type="radio" name="sex" value="Male" checked>Male
							<input type="radio" name="sex" value="Female">Female
	
						</div>
	
						<div id="termsSection">
							<p  class="headerDecoration">Terms and Conditions</p>
							<p style="color: #444444; padding: 10px">
								El presente aplicativo celular es brindado a la población en forma gratuita por la empresa Pele System, como servicio a la comunidad para el envío de denuncias y alertas S.O.S. al Centro de Control de Alto al Crimen, que contribuyan a  la prevención y tratamiento de emergencias y  hechos delictivos. <br/> Pele System y Alto al Crimen no  serán responsables por  defectos o mal funcionamiento del aplicativo ni por el daño directo, indirecto, incidental o consecuente o  daño resultante de la pérdida de uso o pérdida de beneficios esperados como resultado de una avería en la aplicación.  <br/>La aplicación soporta la asociación de hasta 3 fotos por evento.  <br/>El aplicativo es operado con señal celular,  por lo cual en caso de producirse fallas en trasmisión de datos del proveedor celular,  es posible que estos datos no sean  recepcionados por el Centro de Control de Alto al Crimen.  <br/>El aplicativo S.O.S. Alto al Crimen  no reemplaza las tradicionales vías de contacto con  los servicios oficiales de seguridad y  emergencia, mediante  los cuales el ciudadano deberá acudir en caso necesario.  <br/>La activación del botón de S.O.S  producirá el envío de un mensaje de alerta al círculo de contactos definido por el usuario como destinatarios  para recibir la alerta por SMS.  Los SMS tendrán el costo de un mensaje de texto normal y serán a cargo del usuario de la aplicación S.O.S.
							</p>
							<input id="termsCheck" type="checkbox" name="agree" value="agree" style="margin-bottom: 10px;" onclick="ShowRegButton();"><span id="checkBoxText" onclick="ToggleCheck(); ShowRegButton(); return false"> I agree to the terms and conditions</span>
							
							<div>							
								<input id="regButton" class="submitButtonStyle" type="submit" value="Register" style="width: 100%; display: none"  onclick="Register();  return false" />
							</div>
						</div>
					
					</div>
			
				</div>
			</form>	     
			<script type="text/javascript" charset="UTF-8" >
					               	
					$(".autoResizeTextBox").keyup(function (e) 
	                {
	                    adaptiveheight(this);
	                });	
	                

					 	               
            		$(function(){
					    // create a datetimepicker with default settings
					    $("#scroller").mobiscroll().datetime({
						  //  minDate: new Date(now.getFullYear(), now.getMonth(), now.getDate()),
						  theme: 'android-ics light',
						    display: 'modal',
						    animate: 'pop',
						    mode: 'mixed',
						    // 2013-03-15 11:26:17
						    dateFormat: 'dd/mm/yy',
						    timeFormat: 'HH:ii',
						    timeWheels: 'HHii'
						}); // Shorthand for: $("#scroller").mobiscroll({ preset: 'datetime' });
					});
					
					

	                 
			        $("#SOSButton").on("taphold", {duration: 1500},function (e) {SOSLongPress();} )
	          			.on("click",   SOSShortPress)
	          			.on("touchstart", ChangeButtonToPressed)
						.on("touchend", ChangeButtonToNormal);
						
						
						
					$('#SOSPage').on('swipeleft', function(e){ChangePage('reportPage','reportPageTab');})
					.on('swiperight', function(e){ChangePage('messagesPage','messagesTab');});
					
					$('#reportPage').on('swipeleft', function(e){ChangePage('messagesPage','messagesTab');})
					.on('swiperight', function(e){ChangePage('SOSPage','SOSTab');});		

					$('#messagesPage').on('swipeleft', function(e){ChangePage('SOSPage','SOSTab');})
					.on('swiperight', function(e){ChangePage('reportPage','reportPageTab');});	
					
					$(document).click(function (e)
					{
						if (enlarged!='')
						{
						 	var container = $('.photo');
		 				    if (!container.is(e.target) && container.has(e.target).length === 0) 
						    {
								$('#' + enlarged).animate({
			
							   	 height:'60px',
								    width:'60px'
								 });
								 enlarged='';								 
						    }						    
						}
					});	
					
				function OnRegLoad()
				{
					regPageForm=document.getElementById('regPageForm');
					uploadIframe=document.getElementById('uploadIframe');					
				}
								
				var dateChecker=false;
        		$(function(){
        			d=new Date('1990','0','1');
				    // create a datetimepicker with default settings
				    $("#picker").mobiscroll().date({
					  theme: 'android-ics light',
					    display: 'modal',
					    animate: 'pop',
					    mode: 'mixed',
					    // 2013-03-15 11:26:17
					    dateFormat: 'dd-mm-yy',
						defaultValue: d,
						onShow: function(html,inst){document.getElementById('dateAttention').style.display='none';},
						onClose: function(html,inst) {dateChecker=true;},
						onCancel: function(html,inst) {CheckDate();}
		
					}); // Shorthand for: $("#scroller").mobiscroll({ preset: 'datetime' });

			
				});
				$(document).mouseup(function (e)
				{
				    var container = $(".bubble");
				
				    if (!container.is(e.target) // if the target of the click isn't the container...
				        && container.has(e.target).length === 0) // ... nor a descendant of the container
				    {
				        $('.bubble').slideUp();
				    }
				    
					if (dateChecker==true)
					{
					    container=$("#dateSection");
    				    if (!container.is(e.target) // if the target of the click isn't the container...
					        && container.has(e.target).length === 0) // ... nor a descendant of the container
					    {
					        CheckDate();
					        dateChecker=false;
					    }
				   	}
				});
			</script>
			
        </body>
</html>